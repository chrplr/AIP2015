<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Christophe@pallier.org" />
  <title>Text manipulations</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
  </style>
  <link rel="stylesheet" type="text/css" media="screen, projection, print"
    href="http://www.w3.org/Talks/Tools/Slidy2/styles/slidy.css" />
  <link rel="stylesheet" type="text/css" media="screen, projection, print"
   href="css/slidy.css" />
  <script src="http://www.w3.org/Talks/Tools/Slidy2/scripts/slidy.js"
    charset="utf-8" type="text/javascript"></script>
</head>
<body>
<div class="slide titlepage">
  <h1 class="title">Text manipulations</h1>
  <p class="author">
Christophe@pallier.org
  </p>
  <p class="date">Sept. 2013</p>
</div>
<div id="strings" class="slide section level1">
<h1><a href="#strings">Strings</a></h1>
<p>In Python, text can be stored in objects of type ‘str’ (a.k.a as ‘strings’)</p>
<p>String constants are enclosed between single or double quotes</p>
<pre class="sourceCode python"><code class="sourceCode python"><span class="co">&#39;bonjour&#39;</span>

<span class="co">&quot;bonjour Paris!&quot;</span>

<span class="co">&quot;&quot;&quot;hello</span>
<span class="co">ceci est un text</span>
<span class="co">sur plusieurs lignes</span>
<span class="co">&quot;&quot;&quot;</span>

<span class="dt">type</span>(<span class="st">&#39;123&#39;</span>)

<span class="dt">type</span>(<span class="dv">123</span>)

<span class="dv">123</span> + <span class="dv">456</span>

<span class="co">&#39;123&#39;</span> + <span class="st">&#39;456&#39;</span>

<span class="dt">int</span>(<span class="st">&#39;123&#39;</span>)  <span class="co"># converting str into int</span>
<span class="dt">str</span>(<span class="dv">1</span> + <span class="dv">1</span>)  <span class="co"># converting int into str</span></code></pre>
<ul>
<li>A string can be viewed as a <em>list</em> of characters:</li>
</ul>
<pre class="sourceCode python"><code class="sourceCode python">mystring = <span class="st">&#39;superman&#39;</span>

<span class="dt">len</span>(mystring)

mystring[<span class="dv">0</span>]
mystring[<span class="dv">1</span>]
mystring[<span class="dv">1</span>:<span class="dv">5</span>]

<span class="kw">for</span> letter in mystring:
    <span class="dt">print</span>(letter)</code></pre>
<p>A set of functions to manipulate strings is available in the module ‘string’ (see <a href="https://docs.python.org/2/library/string.html]">https://docs.python.org/2/library/string.html</a>). Among others, you should know about:</p>
<ul>
<li>string.upper and string.lower</li>
<li>string.split</li>
<li>string.find</li>
</ul>
<h3 id="interactive-input-from-the-command-line"><a href="#interactive-input-from-the-command-line">Interactive input from the command line:</a></h3>
<pre class="sourceCode python"><code class="sourceCode python">name = <span class="dt">raw_input</span>(<span class="st">&#39;Comment vous appelez-vous ? &#39;</span>)

<span class="dt">print</span> <span class="st">&quot;Bonjour &quot;</span> + name + <span class="st">&#39;!&#39;</span></code></pre>
</div>
<div id="reading-and-writing-to-text-files" class="slide section level1">
<h1><a href="#reading-and-writing-to-text-files">Reading and writing to text files</a></h1>
<p>Create a text file ’essa</p>
<p>```python</p>
<p>writing:</p>
<pre class="sourceCode python"><code class="sourceCode python">filename = <span class="st">&#39;test.txt&#39;</span>
handle = <span class="dt">open</span>(filename, <span class="st">&#39;w&#39;</span>)
handle.write(<span class="st">&#39;welcome&#39;</span>)
handle.write(<span class="st">&#39;to the wonderful&#39;</span>)
handle.write(<span class="st">&#39;world of Python!&#39;</span>)
handle.close()</code></pre>
</div>
<div id="exercices" class="slide section level1">
<h1><a href="#exercices">Exercices</a></h1>
<p>Download <a href="http://www.pallier.org/cours/AIP2013/alice.txt">Alice in Wonderland</a>.</p>
<ol style="list-style-type: example">
<li>Write a program that prints the lines that contains the string ‘Alice’ (tip: you can use the find function from the module string). Then, test the same program with the strings ‘Rabbit’, ‘rabbit’, ‘stone’, ‘office’.</li>
</ol>
</div>
<div class="slide section level1">

<ol start="2" style="list-style-type: example">
<li>Here is a program that converts the text file into a list of words, removing the punctuation marks and converting everything in lower case. Run it.</li>
</ol>
<pre class="sourceCode python"><code class="sourceCode python"><span class="ch">import</span> string
<span class="kw">def</span> remove_punctuation(text):
    punct = string.punctuation + <span class="dt">chr</span>(<span class="dv">10</span>)
    <span class="kw">return</span> text.translate(string.maketrans(punct, <span class="st">&quot; &quot;</span> * <span class="dt">len</span>(punct)))

textori = <span class="dt">file</span>(<span class="st">&#39;alice.txt&#39;</span>).read().lower()
text = remove_punctuation(textori)
words = text.split()
<span class="dt">print</span>(words)</code></pre>
<p>Now write a script that counts the number of occurences of ‘Alice’, ‘Rabbit’ or ‘office’ in the list of words.</p>
</div>
<div class="slide section level1">

<ol start="3" style="list-style-type: example">
<li>Read about Python’s Dictionnaries <a href="http://docs.python.org/2/tutorial/datastructures.html#dictionaries">http://docs.python.org/2/tutorial/datastructures.html#dictionaries</a> and use a dictonnary to store the number of occurrences of each word in Alice in Wonderland (the keys are the words, and the values and the number of occurrences; if word= [‘a’, ‘a’, ‘b’]; dico={‘a’:2, ‘b’:1}).</li>
</ol>
</div>
<div class="slide section level1">

<ol start="4" style="list-style-type: example">
<li>Use numpy and matplotlib to plot the word log(frequencies) as a function of the rank of words on the abscissae (the most frequence word being ranked #1)</li>
</ol>
<p>You can skim through <a href="http://matplotlib.org/users/pyplot_tutorial.html">http://matplotlib.org/users/pyplot_tutorial.html</a>.</p>
<p>Remark: The product rank X frequency is roughly constant. This ‘law’ was discovered by Estoup and popularized by Zipf. See <a href="http://en.wikipedia.org/wiki/Zipf%27s_law">http://en.wikipedia.org/wiki/Zipf%27s_law</a>.</p>
<ol start="5" style="list-style-type: example">
<li>(advanced) Plot the relationship between word length and word frequency.</li>
</ol>
</div>
<div class="slide section level1">

<ol start="6" style="list-style-type: example">
<li>Generate random text (each letter from a-z being equiprobable, and the spacecharacter being 8 times more probable) of 1 million characters. Compute the frequencies of each ‘pseudowords’ and plot the rank/frequency diagram.</li>
</ol>
</div>
<div class="slide section level1">

<ol start="7" style="list-style-type: example">
<li>(advanced) compute the table of transition frequencies between words in Alice and generate random text following this pattern.</li>
</ol>
</div>
<div class="slide section level1">

<ol start="8" style="list-style-type: example">
<li>Read about the MU Puzzle (<a href="http://en.wikipedia.org/wiki/MU_puzzle">http://en.wikipedia.org/wiki/MU_puzzle</a>). Write a program that generates sequences of strings based on the following production rules and the initial state ‘MI’</li>
</ol>
<ol style="list-style-type: decimal">
<li><pre><code>xI -&gt; xIU</code></pre></li>
<li><pre><code>Mx -&gt; Mxx</code></pre></li>
<li><pre><code>xIIIy -&gt; xUy</code></pre></li>
<li><pre><code>xUUy -&gt; xy</code></pre></li>
</ol>
<p>(Tip: use the function string.replace)</p>
</div>
</body>
</html>
